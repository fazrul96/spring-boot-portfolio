image: node:14

pipelines:
  default:
    - step:
        name: Sync Repositories
        script:
          - echo $USERNAME
          - echo BITBUCKET_APP_PASSWORD
          - git clone https://github.com/$GITHUB_USERNAME/spring-boot-portfolio.git
          - cd spring-boot-portfolio
          - git config user.name $GITHUB_USERNAME
          - git config user.email $USER_EMAIL
          - git remote set-url origin https://$USERNAME@bitbucket.org/$USERNAME/spring-boot-portfolio.git
          - git remote -v
          - git pull "https://x-token-auth:ATCTT3xFfGN0UCkyPrxEyG0Rc0wBUdGo3Ku_MGaKBFNr2YYKS8CqbI94vQDWZupf3AfYT42ahkYQxkTkREp7RA7sTxi_NHRV2waj4QLLAejvv0VOU_wG-VFsmcC7fILqDIyK1CuaMA3p7yw0fn_0Wl-q_UmiDj3PR09zXCV-tnfSUSuPdX7Mx1I=6CF3C00B@bitbucket.org/fazrulromli/spring-boot-portfolio.git"
          - git push origin HEAD:$BITBUCKET_BRANCH

          - cd..

          - git clone https://gitlab.com/$GITLAB_USERNAME/spring-boot-portfolio.git
          - cd spring-boot-portfolio
          - git config user.name $GITHUB_USERNAME
          - git config user.email $USER_EMAIL
          - git remote set-url origin https://$USERNAME@bitbucket.org/$USERNAME/spring-boot-portfolio.git
          - git pull "https://x-token-auth:ATCTT3xFfGN0UCkyPrxEyG0Rc0wBUdGo3Ku_MGaKBFNr2YYKS8CqbI94vQDWZupf3AfYT42ahkYQxkTkREp7RA7sTxi_NHRV2waj4QLLAejvv0VOU_wG-VFsmcC7fILqDIyK1CuaMA3p7yw0fn_0Wl-q_UmiDj3PR09zXCV-tnfSUSuPdX7Mx1I=6CF3C00B@bitbucket.org/fazrulromli/spring-boot-portfolio.git"
          - git push origin HEAD:$BITBUCKET_BRANCH
definitions:
  caches:
    node: /usr/local/bin/npm
